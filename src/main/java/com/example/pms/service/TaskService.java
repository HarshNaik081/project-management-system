package com.example.pms.service; import com.example.pms.model.Task; import com.example.pms.model.Project; import com.example.pms.model.User; import com.example.pms.repository.TaskRepository; import com.example.pms.repository.ProjectRepository; import com.example.pms.repository.UserRepository; import org.springframework.stereotype.Service; import java.util.List;
@Service public class TaskService { private final TaskRepository taskRepo; private final ProjectRepository projectRepo; private final UserRepository userRepo; public TaskService(TaskRepository taskRepo, ProjectRepository projectRepo, UserRepository userRepo){ this.taskRepo=taskRepo; this.projectRepo=projectRepo; this.userRepo=userRepo; } public Task createTask(Long projectId, Long userId, Task t){ Project p = projectRepo.findById(projectId).orElseThrow(); User u = userRepo.findById(userId).orElseThrow(); t.setProject(p); t.setAssignee(u); return taskRepo.save(t);} public List<Task> getTasksByProject(Long projectId){ return taskRepo.findByProjectId(projectId);} }